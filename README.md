# MIC_AI

Motor Intelligence Control with Artificial Intelligence (MIC_AI) ??? ????????????????????????????????-???????????????????? ???????????? ???? ???????????????????????????????? ???????????????????? ?????????????????????? ???????????????????? (dq-????????????) ?? ???????????????? ???? ?????????????? ???? MCU.

?????????????????? ???????????????????? ??????????:
- `AI (RL)`: ???????????? ???????????????????? ???????????????????????? `v_d/v_q` (?????? PI/FOC ?? ?????????????? ????????????????????).
- `FOC`: ???????????????????????? ?????????????????? ???????????????????? ?? PI-????????????????????????.

???????? ???????????????????????? ?? ???????????? ??? ?????????????? ?????????????????????????????? ?????????????????? ?????? ???????????????????? ???????????????? ???????????????????????? (?????????????? `??_ref`, ????????????????, ???????????????????????? ????????????????, ?????????????????????? ???? ????????/????????????????????).

## ?????? ????????????

- Digital Twin: dq-?????????????????? + ???????????????? + ???????????????????????????? `abc <-> dq` + ???????????????? ????????????????.
- ?????????????? ??????????????????: V/f ?? FOC (baseline/fallback).
- AI-???????????? `ai_voltage`: ?????????? ?????????????????? `v_d/v_q` ????????????????.
- ?????????????????????? ?????? ??????????????, ?????????????????? ?? paper-???????????????? (PNG+PDF, ?????????????? ??????????????).

## ?????????????????? (Windows)

???????? ?????????????????????? ?????????????????? ?????? ?????????????? (`.venv/`), ????????????????????:

`.\.venv\Scripts\python.exe -m pip install -r requirements.txt`

???????? ?????????????????? ??????:

`python -m venv .venv`

`.\.venv\Scripts\python.exe -m pip install -r requirements.txt`

## ???????????????? `ai_voltage`

`.\.venv\Scripts\python.exe mic_ai/ai/train_ai_voltage.py config/env_demo_true_motor1.py --episodes 600 --episode-steps 200`

??????????????????:
- `outputs/demo_ai/episode_logs/` ??? JSON-???????? ???? ????????????????
- `outputs/demo_ai/plots/` ??? ?????????????? ????????????????
- `outputs/demo_ai/checkpoints/` ??? `best_actor.pth`, `last_actor.pth`

## ?????????????? ?????????????? (AI vs FOC, IEEE-??????????)

?????????????? ?????????????????? (???????????????????? `??_ref`, ????????????????, ???????????????????????? ??????????????, ??????????????????????):

`.\.venv\Scripts\python.exe -m mic_ai.tools.paper_plots_ai_vs_foc --env-config config/env_demo_true_motor1.py --ai-checkpoint outputs/demo_ai/checkpoints/motor1/last_actor.pth --episode-steps 200 --episodes-per-stage 25 --window 5 --out-dir outputs/paper_figures_motor1_strict_v7 --voltage-scale 1.25 --disable-noise`

??????????: `outputs/paper_figures_motor1_strict_v7/` (PNG+PDF+JSON+`captions_ru.txt`).

## ?????????? ?????? ????????????: ???????????????????????? ?????????????? (seeds), ?????????????? ?? 95% ????

???????????? ?????? ?????????? ?????????????????? (AI: ?????????????? ?? 95% ?????????????????????????? ???????????????? ???? ??????-????????????????):

`.\.venv\Scripts\python.exe -m mic_ai.tools.paper_eval_suite --env-config config/env_demo_true_motor1.py --ai-checkpoint outputs/demo_ai/checkpoints/motor1/last_actor.pth --episode-steps 200 --episodes-per-stage 25 --voltage-scale 1.25 --seeds 10 --seed0 0 --disable-noise --out-dir outputs/paper_eval_suite_motor1_s10`

?????????? ?? ???????????? ?????????????????? (?????? ?????????????????????? ?? AI-?????????????????????? ?? ???????????? FOC-?????????????????????? ?? ??????????????????):

`.\.venv\Scripts\python.exe -m mic_ai.tools.paper_eval_suite --env-config config/env_demo_true_motor1.py --ai-checkpoint outputs/demo_ai/checkpoints/motor1/last_actor.pth --episode-steps 200 --episodes-per-stage 25 --voltage-scale 1.25 --seeds 10 --seed0 0 --sigma-omega 0.05 --sigma-i 0.03 --out-dir outputs/paper_eval_suite_motor1_s10_noise_fair`

?????????????????? ?? `outputs/paper_eval_suite_motor1_s10/`:
- `summary_overall.csv` ??? ?????????????? ?????????????? ???????????? (AI mean/std/ci95 vs FOC)
- `summary_by_stage.csv` ??? ???????????? ???? ??????????????
- `fig_stage_Irms.*`, `fig_stage_Pin_pos.*`, `fig_stage_speed_error.*` ??? ?????????????? ???? ?????????????? (AI: 95% ????)
- `run_meta.json` ??? ?????????????????? ?????????????? (?????? ??????????????????????????????????)

## ?????????????? ???????????? (LaTeX/Markdown)

?????????????????? ???????????? ?????? ?????????????? ?? ???????????? (LaTeX) ?? ?????? ?????????????????????????? (Markdown):

`.\.venv\Scripts\python.exe -m mic_ai.tools.paper_tables --summary-overall outputs/paper_eval_suite_motor1_s10/summary_overall.csv --summary-by-stage outputs/paper_eval_suite_motor1_s10/summary_by_stage.csv --summary-cases outputs/paper_param_robustness_motor1_s5_no_noise/summary_cases.csv --out-dir outputs/paper_tables --prefix motor1`

## ??????????????????????: ???????????????? ???????????????????? ??????????????????/????????????????

???????????? ???????????? ?????????????????? ?? ?????????????????? ???????????????????? (????????????: `Rs +10%`, `Lm -10%`, `J +20%`, `T_load +20%`, ?????????????????????????????? worst-case):

`.\.venv\Scripts\python.exe -m mic_ai.tools.paper_param_robustness --env-config config/env_demo_true_motor1.py --ai-checkpoint outputs/demo_ai/checkpoints/motor1/last_actor.pth --episode-steps 200 --episodes-per-stage 25 --voltage-scale 1.25 --seeds 5 --seed0 0 --disable-noise --out-dir outputs/paper_param_robustness_motor1_s5_no_noise`

??????????: `outputs/paper_param_robustness_motor1_s5_no_noise/`

- `summary_cases.csv` ??? ?????????????????? AI vs FOC ???? ???????? ???????????? (mean + 95% ???? ?????? AI)
- `case_*/summary_overall.csv`, `case_*/summary_by_stage.csv` ??? ?????????????? ???? ?????????????? ??????????
- `case_*/run_meta.json` ??? ?????????????????? ?? ?????????????????????????????? ??????????

## Manifest ???????????????????????? (??????????????????????????????????)

?????????????? ?????????????????????????? ???????????? ?????????????? (????????????, ??????????????????????, ?????????????? `??_ref`, ????????, ????????????, ?????? ??????????????????):

`.\.venv\Scripts\python.exe -m mic_ai.tools.paper_experiment_manifest --env-config config/env_demo_true_motor1.py --ai-checkpoint outputs/demo_ai/checkpoints/motor1/last_actor.pth --episode-steps 200 --episodes-per-stage 25 --voltage-scale 1.25 --seeds 10 --seed0 0 --disable-noise --out-dir outputs/paper_manifest_motor1`

??????????: `outputs/paper_manifest_motor1/manifest_motor1.json` ?? `outputs/paper_manifest_motor1/manifest_motor1.md`.

## ?????????????????? ?????????????????????? (????????????)

- `models/` ??? dq-????????????, ????????????????, ????????????????????????????
- `control/` ??? V/f, FOC
- `simulation/` ??? ?????????????????? ?? ??????????????????
- `mic_ai/ai/` ??? ?????????????????? ?? ????????????
- `mic_ai/tools/` ??? ????????????, ??????????????????, paper-??????????????
- `outputs/` ??? ???????????????????? ??????????????????????????
## Digital Twin Bench (WIP)

New bench scaffold (in progress) for reproducible digital twin experiments:
- `sim/` (servo load model added in Stage 1)
- `bench/`, `candidates/`, `docs/`, `logs/` (placeholders for upcoming stages)

Stage 1 quick check:
`python -m pytest tests/test_load_model.py`

Stage 1 example run:
`python sim/load_servo.py`Stage 2 quick check:
`python -m pytest tests/test_safety.py`Stage 3 demo (bench orchestrator + logging):
`python main.py --demo one_experiment`

Stage 3 tests:
`python -m pytest tests/test_orchestrator_logging.py`Stage 4 demo (testsuite E1..E7):
`python main.py --demo testsuite`

Stage 4 tests:
`python -m pytest tests/test_testsuite.py`Stage 5 demo (score + leaderboard):
`python main.py --demo score_testsuite --policy-id foc_baseline`

Stage 5 tests:
`python -m pytest tests/test_scoring_leaderboard.py`Stage 6 demo (candidate runner):
`python candidates/runner.py --candidate candidates/examples/vf_default.json`

Stage 6 batch demo:
`python candidates/runner.py --batch-dir candidates/examples`

Stage 6 tests:
`python -m pytest tests/test_candidate_runner.py`Stage 7 demo (identify only):
`python main.py --demo identify_only --t-end 2.0 --dt 0.001`

Stage 7 demo (testsuite + identification):
`python main.py --demo testsuite --with-identification --t-end 0.2 --dt 0.01`

Stage 7 demo (candidate runner + identification):
`python candidates/runner.py --candidate candidates/examples/foc_default.json --with-identification`

Stage 7 tests:
`python -m pytest tests/test_identification_basic.py tests/test_identification_drift_response.py`Stage 8 demo (full testsuite + identification + scoring):
`python main.py --demo score_testsuite_full --t-end 0.2 --dt 0.001`

Stage 8 tests:
`python -m pytest tests/test_full_suite_smoke.py`

Stage 9 demo (PID baseline):
`python candidates/runner.py --candidate candidates/examples/pid_default.json`

Stage 9 demo (MIC baseline + identification):
`python candidates/runner.py --candidate candidates/examples/mic_default.json --with-identification`

Stage 9 demo (batch baselines + identification):
`python candidates/runner.py --batch-dir candidates/examples --with-identification`

Stage 9 tests:
`python -m pytest tests/test_baseline_policies.py`

## Project summary (MIC_AI Digital Twin Bench)

MIC_AI = Motor Intelligence Control with Artificial Intelligence. This repository hosts a reproducible digital twin bench
for an induction motor + inverter with servo load, sensors, and safety supervision. The bench adds identification
(Rs estimate + aging), a fixed testsuite E1..E7, scoring + leaderboard, and a JSON candidate runner for baseline and
research policies. The goal is PC-first simulation with a 1:1 path to embedded hardware. Logs are stored as NPZ
(timeseries) + JSON (metadata and metrics).
